<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coin App</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: white;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            backdrop-filter: blur(10px);
        }

        .online {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 14px;
        }

        .online-dot {
            width: 8px;
            height: 8px;
            background: #00ff00;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .deposit-btn {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
        }

        .promo-banner {
            background: linear-gradient(45deg, #FF416C, #FF4B2B);
            padding: 10px;
            border-radius: 10px;
            text-align: center;
            margin-bottom: 20px;
            animation: glow 2s infinite;
        }

        @keyframes glow {
            0% { box-shadow: 0 0 10px #FF416C; }
            50% { box-shadow: 0 0 20px #FF4B2B; }
            100% { box-shadow: 0 0 10px #FF416C; }
        }

        .tabs {
            display: flex;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 5px;
            margin-bottom: 20px;
        }

        .tab {
            flex: 1;
            text-align: center;
            padding: 10px;
            cursor: pointer;
            border-radius: 10px;
            transition: all 0.3s;
        }

        .tab.active {
            background: rgba(255,255,255,0.2);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .cases-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .case-item {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: transform 0.3s;
        }

        .case-item:hover {
            transform: scale(1.05);
        }

        .case-image {
            width: 80px;
            height: 80px;
            margin: 0 auto 10px;
            background: #fff;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .tasks-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .task-item {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .profile-info {
            text-align: center;
            background: rgba(255,255,255,0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .balance {
            font-size: 24px;
            font-weight: bold;
            margin: 10px 0;
        }

        .ref-link {
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            padding: 10px;
            margin: 10px 0;
            word-break: break-all;
        }

        /* –ê–Ω–∏–º–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–µ–π—Å–∞ */
        .case-opening {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.9);
            display: none;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .case-items {
            display: flex;
            gap: 20px;
            animation: scroll 3s ease-in-out;
        }

        @keyframes scroll {
            0% { transform: translateX(100%); }
            100% { transform: translateX(-100%); }
        }

        .won-item {
            background: gold;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            animation: bounce 0.5s;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- –®–∞–ø–∫–∞ -->
        <div class="header">
            <div class="online">
                <div class="online-dot"></div>
                <span>Online: 1,234</span>
            </div>
            <button class="deposit-btn" onclick="openDeposit()">–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ</button>
        </div>

        <!-- –ü—Ä–æ–º–æ–∫–æ–¥ -->
        <div id="promoBanner" class="promo-banner" style="display: none;">
            <strong>–ü–†–û–ú–û–ö–û–î –î–ï–ô–°–¢–í–£–ï–¢ –°–ï–ô–ß–ê–°!</strong>
            <div id="promoCode"></div>
        </div>

        <!-- –¢–∞–±—ã -->
        <div class="tabs">
            <div class="tab active" onclick="switchTab('cases')">üéÅ –ö–µ–π—Å—ã</div>
            <div class="tab" onclick="switchTab('tasks')">üìã –ó–∞–¥–∞–Ω–∏—è</div>
            <div class="tab" onclick="switchTab('profile')">üë§ –ü—Ä–æ—Ñ–∏–ª—å</div>
        </div>

        <!-- –ö–æ–Ω—Ç–µ–Ω—Ç —Ç–∞–±–æ–≤ -->
        <div id="cases" class="tab-content active">
            <div class="cases-grid" id="casesGrid">
                <!-- –ö–µ–π—Å—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
            </div>
        </div>

        <div id="tasks" class="tab-content">
            <div class="tasks-list" id="tasksList">
                <!-- –ó–∞–¥–∞–Ω–∏—è –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ JavaScript -->
            </div>
        </div>

        <div id="profile" class="tab-content">
            <div class="profile-info">
                <div id="userName">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <div class="balance" id="userBalance">0 –∂–µ—Ç–æ–Ω–æ–≤</div>
                <div>–†–µ—Ñ–µ—Ä–∞–ª—å–Ω–∞—è —Å—Å—ã–ª–∫–∞:</div>
                <div class="ref-link" id="refLink">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
                <div>–ü—Ä–∏–≥–ª–∞—à–µ–Ω–æ: <span id="refCount">0</span> –¥—Ä—É–∑–µ–π</div>
            </div>
        </div>
    </div>

    <!-- –ê–Ω–∏–º–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–µ–π—Å–∞ -->
    <div id="caseOpening" class="case-opening">
        <div class="won-item" id="wonItem">
            <h3>–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º!</h3>
            <div id="itemName"></div>
            <div id="itemRarity"></div>
            <button onclick="closeCaseOpening()">OK</button>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram Web App
        let tg = window.Telegram.WebApp;
        tg.expand();
        tg.enableClosingConfirmation();

        // –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        let userData = {
            balance: 0,
            refLink: '',
            refCount: 0
        };

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ
        async function loadUserData() {
            try {
                // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ –≤–∞—à–µ–º—É –±—ç–∫–µ–Ω–¥—É
                // –ü–æ–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–∞–≥–ª—É—à–∫–∏
                userData.balance = 1000;
                userData.refLink = "https://t.me/your_bot?start=ref_123456";
                userData.refCount = 5;
                
                updateProfile();
                loadPromo();
                loadCases();
                loadTasks();
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }

        function updateProfile() {
            document.getElementById('userName').textContent = tg.initDataUnsafe.user?.first_name || '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å';
            document.getElementById('userBalance').textContent = userData.balance + ' –∂–µ—Ç–æ–Ω–æ–≤';
            document.getElementById('refLink').textContent = userData.refLink;
            document.getElementById('refCount').textContent = userData.refCount;
        }

        function loadPromo() {
            // –ó–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ–º–æ–∫–æ–¥–∞ —Å —Å–µ—Ä–≤–µ—Ä–∞
            const promo = {
                active: true,
                code: "SUPER2024",
                reward: 100,
                description: "–ü—Ä–æ–º–æ–∫–æ–¥ –Ω–∞ 100 –∂–µ—Ç–æ–Ω–æ–≤"
            };

            if (promo.active) {
                document.getElementById('promoBanner').style.display = 'block';
                document.getElementById('promoCode').innerHTML = 
                    `<div>–ö–æ–¥: <strong>${promo.code}</strong></div>
                     <div>${promo.description}</div>`;
            }
        }

        function loadCases() {
            const cases = [
                { id: 1, name: "üì¶ –ë–∞–∑–æ–≤—ã–π –∫–µ–π—Å", price: 100, image: "üéÅ" },
                { id: 2, name: "üéÅ –ü—Ä–µ–º–∏—É–º –∫–µ–π—Å", price: 500, image: "üíé" },
                { id: 3, name: "üî• –û–≥–Ω–µ–Ω–Ω—ã–π –∫–µ–π—Å", price: 1000, image: "üî•" },
                { id: 4, name: "üëë –õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –∫–µ–π—Å", price: 5000, image: "üëë" }
            ];

            const grid = document.getElementById('casesGrid');
            grid.innerHTML = cases.map(caseItem => `
                <div class="case-item" onclick="openCase(${caseItem.id})">
                    <div class="case-image">${caseItem.image}</div>
                    <div>${caseItem.name}</div>
                    <div>${caseItem.price} –∂–µ—Ç–æ–Ω–æ–≤</div>
                </div>
            `).join('');
        }

        function loadTasks() {
            const tasks = [
                { id: 1, title: "üì± –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –∫–∞–Ω–∞–ª", reward: 50, completed: false },
                { id: 2, title: "üë• –ü—Ä–∏–≥–ª–∞—Å–∏—Ç–µ –¥—Ä—É–≥–∞", reward: 100, completed: false },
                { id: 3, title: "üéÆ –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–π –≤—Ö–æ–¥", reward: 10, completed: true }
            ];

            const list = document.getElementById('tasksList');
            list.innerHTML = tasks.map(task => `
                <div class="task-item">
                    <div>
                        <div>${task.title}</div>
                        <small>+${task.reward} –∂–µ—Ç–æ–Ω–æ–≤</small>
                    </div>
                    <button onclick="completeTask(${task.id})" 
                            ${task.completed ? 'disabled' : ''}>
                        ${task.completed ? '‚úÖ' : '–í—ã–ø–æ–ª–Ω–∏—Ç—å'}
                    </button>
                </div>
            `).join('');
        }

        function switchTab(tabName) {
            // –°–∫—Ä—ã—Ç—å –≤—Å–µ —Ç–∞–±—ã
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });

            // –ü–æ–∫–∞–∑–∞—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ç–∞–±
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }

        function openCase(caseId) {
            if (userData.balance < 100) {
                alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∂–µ—Ç–æ–Ω–æ–≤!');
                return;
            }

            // –ê–Ω–∏–º–∞—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è –∫–µ–π—Å–∞
            const opening = document.getElementById('caseOpening');
            const wonItem = document.getElementById('wonItem');
            
            opening.style.display = 'flex';
            
            // –ò–º–∏—Ç–∞—Ü–∏—è –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–æ–∫—Ä—É—Ç–∞
            setTimeout(() => {
                const items = [
                    { name: "–û–±—ã—á–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç", rarity: "common" },
                    { name: "–†–µ–¥–∫–∏–π –ø—Ä–µ–¥–º–µ—Ç", rarity: "rare" },
                    { name: "–≠–ø–∏—á–µ—Å–∫–∏–π –ø—Ä–µ–¥–º–µ—Ç", rarity: "epic" },
                    { name: "–õ–µ–≥–µ–Ω–¥–∞—Ä–Ω—ã–π –ø—Ä–µ–¥–º–µ—Ç", rarity: "legendary" }
                ];
                
                const won = items[Math.floor(Math.random() * items.length)];
                
                document.getElementById('itemName').textContent = won.name;
                document.getElementById('itemRarity').textContent = won.rarity;
                document.getElementById('itemRarity').className = won.rarity;
                
                // –û–±–Ω–æ–≤–ª—è–µ–º –±–∞–ª–∞–Ω—Å
                userData.balance -= 100;
                updateProfile();
                
            }, 3000);
        }

        function closeCaseOpening() {
            document.getElementById('caseOpening').style.display = 'none';
        }

        function completeTask(taskId) {
            // –ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∑–∞–¥–∞–Ω–∏—è
            userData.balance += 50; // –ü—Ä–∏–º–µ—Ä –Ω–∞–≥—Ä–∞–¥—ã
            updateProfile();
            event.target.disabled = true;
            event.target.textContent = '‚úÖ';
        }

        function openDeposit() {
            tg.showPopup({
                title: '–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞',
                message: '–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è:',
                buttons: [
                    {id: 'crypto', type: 'default', text: '–ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã'},
                    {id: 'card', type: 'default', text: '–ë–∞–Ω–∫–æ–≤—Å–∫–∞—è –∫–∞—Ä—Ç–∞'},
                    {type: 'cancel'}
                ]
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', loadUserData);
    </script>
</body>
</html>